{% extends "shop/base.html" %}
{% load static%}
{% block content %}
        <!-- categories -->
        <!-- MDI Icons -->
        <link rel="stylesheet" href="//cdn.materialdesignicons.com/6.5.95/css/materialdesignicons.min.css">
        <style>
            .story-ring {
                padding: 2px;
            }
        </style>
        
    <div class=" mx-auto  flex">
        <div class=" flex-none w-2/3 ">
        
            <div id="default-carousel" class="relative" data-carousel="static">
                <!-- Carousel wrapper -->
                <div class="overflow-hidden relative h-56 rounded-lg sm:h-64 xl:h-80 2xl:h-96">
                    <!-- Item 1 -->
                    <div class="hidden duration-700 ease-in-out" data-carousel-item>
                        <span
                            class="absolute top-1/2 left-1/2 text-2xl font-semibold text-white -translate-x-1/2 -translate-y-1/2 sm:text-3xl dark:text-gray-800">First
                            Slide</span>
                        <img src="{% static 'img/sale.jpg' %}"
                            class="block absolute top-1/2 left-1/2 w-full -translate-x-1/2 -translate-y-1/2" alt="...">
                    </div>
                    <!-- Item 2 -->
                    <div class="hidden duration-700 ease-in-out" data-carousel-item>
                        <img src="{% static 'img/sale.jpg' %}"
                            class="block absolute top-1/2 left-1/2 w-full -translate-x-1/2 -translate-y-1/2" alt="...">
                    </div>
                    <!-- Item 3 -->
                    <div class="hidden duration-700 ease-in-out" data-carousel-item>
                        <img src="{% static 'img/sale.jpg' %}"
                            class="block absolute top-1/2 left-1/2 w-full -translate-x-1/2 -translate-y-1/2" alt="...">
                    </div>
                </div>
                <!-- Slider indicators -->
                <div class="flex absolute bottom-5 left-1/2 z-30 space-x-3 -translate-x-1/2">
                    <button type="button" class="w-3 h-3 rounded-full" aria-current="false" aria-label="Slide 1"
                        data-carousel-slide-to="0"></button>
                    <button type="button" class="w-3 h-3 rounded-full" aria-current="false" aria-label="Slide 2"
                        data-carousel-slide-to="1"></button>
                    <button type="button" class="w-3 h-3 rounded-full" aria-current="false" aria-label="Slide 3"
                        data-carousel-slide-to="2"></button>
                </div>
                <!-- Slider controls -->
                <button type="button"
                    class="flex absolute top-0 left-0 z-30 justify-center items-center px-4 h-full cursor-pointer group focus:outline-none"
                    data-carousel-prev>
                    <span
                        class="inline-flex justify-center items-center w-8 h-8 rounded-full sm:w-10 sm:h-10 bg-white/30 dark:bg-gray-800/30 group-hover:bg-white/50 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70 group-focus:outline-none">
                        <svg class="w-5 h-5 text-white sm:w-6 sm:h-6 dark:text-gray-800" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                        </svg>
                        <span class="hidden">Previous</span>
                    </span>
                </button>
                <button type="button"
                    class="flex absolute top-0 right-0 z-30 justify-center items-center px-4 h-full cursor-pointer group focus:outline-none"
                    data-carousel-next>
                    <span
                        class="inline-flex justify-center items-center w-8 h-8 rounded-full sm:w-10 sm:h-10 bg-white/30 dark:bg-gray-800/30 group-hover:bg-white/50 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70 group-focus:outline-none">
                        <svg class="w-5 h-5 text-white sm:w-6 sm:h-6 dark:text-gray-800" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                        <span class="hidden">Next</span>
                    </span>
                </button>
            </div>
        
            <script src="https://unpkg.com/flowbite@1.4.0/dist/flowbite.js"></script>
        </div>

        <div class="flex-initial w-full px-1">
            <h1 class="text-center leading-1 font-bold text-2xl">Nos Categories</h1>
            <div class="grid grid-cols-3 gap-3 w-full espace-x-2">
                {% for categorie in categorie %}
                <div class=" ">
                <a href="categorie/{{categorie.id}}">
                    <button class="group relative  w-32 overflow-hidden rounded-lg bg-white text-lg shadow">
                        <div class="absolute inset-0 w-3 bg-teal-700 transition-all duration-[250ms] ease-out group-hover:w-full"><img class="w-16 rounded-full" src="{{categorie.image.url}}"></div>
                        <span class="relative text-sm text-black group-hover:text-white leading-1">{{categorie.name}}</span>
                    </button>
                    
                    <!-- <img class="w-16 rounded-full" src="{{categorie.image.url}}"> -->
                </a>
                </div>
                {% endfor %}
                
            </div>
        </div>  
    </div>

    <!-- list product -->
    <div class=" container lg:container content-center mx-auto">
    
        <section class="mt-10 mb-20 pb-10">
            <div>
                <h4 class="text-xl font-light border-b-4 border-black-500">
                    Derniers ajouts
                </h4>
    
            </div>
            {% comment %} list products {% endcomment %}
            <div class="grid lg:grid-cols-5 lg:space-x-2 gap-4 grid-cols-2 sm:grid-cols-1 space-x-1 md:grid-cols-3 md:mx-auto sm:grid-cols-3 justify-center mx-auto">
                {% for product in product %}
                
                <div
                    class="text-center lg:w-56 w-32 md:w-56 mx-auto cursor-pointer rounded-3xl bg-gray-100 transition duration-300 ease-in-out hover:scale-105    hover:drop-shadow-2xl">
                    <a href="detail/{{product.id}}">
                        <div
                            class="w-full h-full bg-white content-center shadow-md rounded-lg max-w-sm bg-light dark:border-gray-700">
                            <a href="detail/{{product.id}}">
                                <img class="rounded-t-lg p-8 lg:w-56 lg:h-56 md:w-56 md:h-56 sm:w-56 xs:w-32 xs:h-32" src="{{product.image.url}}" alt="product image" />
                            </a>
                            <div class="px-5 pb-5">
                                <a href="detail/{{product.id}}">
                                    <h3 id="aa{{ product.id }}"
                                        class="text-gray-900 font-semibold lg:text-lg text-sm tracking-tight text-dark truncate">
                                        {{product.title}}
                                    </h3>
                                </a>
                                <div class="flex items-center mt-2.5 mb-5">
                                    <p class="text-xs truncate">{{ product.category }}</p>
                                    
                                </div>
                               
                                <div class="flex items-center justify-between ">
                                    <span id="price{{ product.id }}"
                                        class="lg:text-xl text-sm font-bold text-gray-900 text-dark">{{product.price}} </span>
                                    <h6 class="flex">CFA</h6>
                                </div>
                                <div class="flex  justify-between espace-x-2">
                                    
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
                {%endfor %}
            </div>
        </section>
        
        <!-- <div class="pagination mt-5 text-center">
        <span class="step-links">
          {% if products.has_previous %}
          <a href="?page=1">&laquo; first</a>
          <a href="?page={{ products.previous_page_number }}"><i class="bx bxs-left-arrow-circle text-5xl"></i></a>
          {% endif %} {% if products.has_next %}
          <a href="?page={{ products.next_page_number }}"><i class="bx bxs-right-arrow-circle text-5xl"></i></a>
          <a href="?page={{ products.paginator.num_pages }}">last &raquo;</a>
          {% endif %}
          <span class="current block">
            Page {{ products.number }} of {{ products.paginator.num_pages }}.
          </span>
        </span>
      </div> -->
        <!-- produit par categories -->
    </div>
<br>
  
   <br>

   
    <!-- category -->
    <div class="h-screen flex items-center justify-center bg-gradient-to-r from-teal-100 to-teal-500" id="categorie">
    
        <div class="grid grid-cols-6 gap-x-4 gap-y-1 max-w-2xl">
    
            <!-- Title -->
            <div class="col-span-full mb-3">
                <h1 class="text-3xl font-bold"> Nos categories </h1>
            </div>
    
            <!-- Card -->
            {% for categorie in categorie %}
            <div class="col-span-2">
                <a href="categorie/{{categorie.id}}">
                    <img src="https://picsum.photos/seed/4/2000/1000" class="rounded-xl brightness-75" />
                
                <p class="text-xs -translate-y-6 text-white font-semibold sm:-translate-y-8 sm:text-base translate-x-3">
                    {{categorie.name}} </p></a>
                    
            </div>
            {% endfor %}
    
    
        </div>
    
    </div>
    

{% block js %}
<script class="text/javascript">
    if (localStorage.getItem('panier') == null) {
            var panier = {};
        }
        else {
            panier = JSON.parse(localStorage.getItem('panier'));
        }
        $(document).on('click', '.ajouter',
            function () {
                console.log('ajouter au panier');
                var item_id = this.id.toString();
                console.log(item_id);
                if (panier[item_id] != undefined) {
                    quantite = panier[item_id][0] + 1;
                    panier[item_id][0] = quantite;
                    panier[item_id][2] += parseFloat(document.getElementById("price" + item_id).innerHTML);








                }
                else {
                    quantite = 1;
                    name = document.getElementById("aa" + item_id).innerHTML;
                    prix = parseFloat(document.getElementById("price" + item_id).innerHTML);
                    panier[item_id] = [quantite, name, prix];



                }
                console.log(panier);
                localStorage.setItem('panier', JSON.stringify(panier));
                window.location.reload();

            }); 
            function afficherList(panier) {

                    var panierString = "";
                    panierString += '<div class=" w-3/4  overflow-y-auto"><div class="flex flex-row  justify-between items-center">';
                    var index = 1;
                    for (var x in panier) {
                        panierString += '<div class="flex flex-row  items-center"><span class="ml-4 font-semibold text-sm truncate">' + "N°"
                            + index + "- ";
                        panierString += document.getElementById("aa" + x).innerHTML + '<div class="w-32 flex justify-between"><span class="px-3 py-1 rounded-md bg-gray-300 " > -</span><span class="font-semibold mx-4 ">' + panier[x][0] + '</span><span class="px-3 py-1 rounded-md bg-gray-300 ">+</span></div ><div class="font-semibold text-lg w-16 text-center">' + panier[x][2] + '</div>' +
                            '</span></div></div></div>';
                        index += 1;
                    }
                    panierString += "<span class='px-4 py-2 rounded-md bg-pink-100 text-gray-800'><a href='checkout'>Valider Ma Commande</a></span>";

                    document.getElementById("panierList").innerHTML = panierString;

                };
                if (panier.length == 0) {
                    document.getElementById("panierList").innerHTML = '<h1>Votre panier est Vide</h1>';
                }
                afficherList(panier);
        document.getElementById("valpanier").innerHTML = Object.keys(panier).length;

</script>
{% endblock js %}

{% endblock content %}